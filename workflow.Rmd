---
title: "Luxury Effect Remix"
output: github_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Goal

A couple years ago, some collaborators and I published a pretty cool paper that found a luxury effect for arthropod diversity in homes. In short, houses in wealthier neighborhoods had more kinds of bugs in their homes. Here's the open access paper from [Biology Letters](http://rsbl.royalsocietypublishing.org/content/12/8/20160322).

Through working on that paper I learned about the rich trove of U.S. census data. It seemed like a good exercise to revisit the script I wrote at the time to see how I can improve it and make it more usable for other people.

My general plan of attack is to first use the data I made available in the supplementary files section of the original paper and dubplicate the analyese in a more reproducible format.  Then, I'm going to go a step back and reaccess the census data with the original uncleaned dataset to create a clean pipeline. Throughout the process, I'm going to also look for ways to improve on the original paper.

## Original Analyses

The following files were included in the original paper.
```{r firstThingsFirst}
# load libraries
library(tidyverse)
library(vegan)
library(ggmap)
library(ggrepel)
library(ggpubr)
library(stringr)
library(acs)

# load files
load('data/aoh.Rdata')
load('data/houses.Rdata')
```

## Basic EDA

First let's take a look at what's in each of the files

```{r initialLookAOH, echo=FALSE}
head(aoh)
summary(aoh)
```

The main 'aoh' file is organized in a way such that each row is a unique arthropod family (such as Formicidae for ants or Cecidomyiidae for gall mideges) in each unique collecting event (each room in each house, such as the basement of house 23 or the 3rd bedroom in house 38). For each row there can be multiple morphospecies per family (in our case, anywhere from 1-20).

```{r initialLookHOUSES}
head(houses)
summary(houses)
```

The 'houses' file gives information on each, surprise surprise, house.  Rooms (the unique collecting events) have been collapsed to just the house level, so a conservative estimate of the number of arthropod families is listed for each house (the assumption that if there are 3 morphospecies of a given arthrpod family in one room of a house, and 10 in another, all 3 of those prior species are redundant in the the 10 in the other room). The 'houses' file also has statistics about the characteristics of each house, such as how much and how diverse the ground cover and canopy cover on the property are, the size of the house, house value, and things going on at the neighborhood scale based on remote sensing and US census data.
